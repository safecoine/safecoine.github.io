<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Coin Catch Game</title>
<style>
  body {
    margin: 0;
    background: #222;
    overflow: hidden;
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
  }
  #gameCanvas {
    background: linear-gradient(#333, #111);
    display: block;
    margin: auto;
  }
  #score {
    font-size: 24px;
    margin: 10px;
  }
</style>
</head>
<body>
<div id="score">Ø§Ù…ØªÛŒØ§Ø²: 0</div>
<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let basket = { x: 160, y: 550, width: 80, height: 20 };
let coins = [];
let score = 0;
let gameOver = false;
let speed = 2;

function createCoin() {
  coins.push({
    x: Math.random() * (canvas.width - 30),
    y: -30,
    size: 30
  });
}

function drawBasket() {
  ctx.fillStyle = "gold";
  ctx.fillRect(basket.x, basket.y, basket.width, basket.height);
}

function drawCoin(coin) {
  ctx.beginPath();
  ctx.arc(coin.x + coin.size/2, coin.y + coin.size/2, coin.size/2, 0, Math.PI * 2);
  ctx.fillStyle = "yellow";
  ctx.fill();
  ctx.strokeStyle = "#b8860b";
  ctx.stroke();
}

function update() {
  if (gameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawBasket();

  coins.forEach((coin, i) => {
    coin.y += speed;
    drawCoin(coin);

    // Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø¨Ø§ Ø³Ø¨Ø¯
    if (
      coin.y + coin.size > basket.y &&
      coin.x + coin.size > basket.x &&
      coin.x < basket.x + basket.width
    ) {
      score++;
      document.getElementById("score").innerText = "Ø§Ù…ØªÛŒØ§Ø²: " + score;
      coins.splice(i, 1);

      // Ù¾ÛŒØ§Ù… Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ
      if (score % 5 === 0) {
        alert("Ø¢ÙØ±ÛŒÙ†! Ø¯Ø§Ø±ÛŒ ØªØ±Ú©ÙˆÙ†Ø¯ÛŒ ðŸ˜Ž");
      }

      // Ø§ÙØ²Ø§ÛŒØ´ Ø³Ø®ØªÛŒ
      if (score % 3 === 0) speed += 0.5;
    }

    // Ø§Ú¯Ø± Ú©ÙˆÛŒÙ† Ø±Ø¯ Ø´Ø¯
    if (coin.y > canvas.height) {
      gameOver = true;
      alert("Ø¨Ø§Ø®ØªÛŒ ðŸ˜‚ Ø§Ù…ØªÛŒØ§Ø²Øª Ø´Ø¯: " + score);
    }
  });

  requestAnimationFrame(update);
}

setInterval(createCoin, 800); // Ù‡Ø± 0.8 Ø«Ø§Ù†ÛŒÙ‡ ÛŒÙ‡ Ú©ÙˆÛŒÙ†
update();

// Ú©Ù†ØªØ±Ù„ Ø¨Ø§ Ù…ÙˆØ³
document.addEventListener("mousemove", e => {
  let rect = canvas.getBoundingClientRect();
  basket.x = e.clientX - rect.left - basket.width / 2;
});

// Ú©Ù†ØªØ±Ù„ Ø¨Ø§ Ù„Ù…Ø³
canvas.addEventListener("touchmove", e => {
  let touch = e.touches[0];
  let rect = canvas.getBoundingClientRect();
  basket.x = touch.clientX - rect.left - basket.width / 2;
  e.preventDefault();
}, { passive: false });

</script>
</body>
</html>
