<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>بازی سیف کوین</title>
<style>
  body, html {
    margin: 0; padding: 0; overflow: hidden; background: #f0f0f0;
    touch-action: none;
    font-family: Tahoma, sans-serif;
    direction: rtl;
  }
  #gameCanvas {
    display: block;
    background: #fff;
  }
  #restartBtn {
    position: fixed;
    top: 45%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 12px 24px;
    font-size: 20px;
    display: none;
    cursor: pointer;
  }
  #gameOverMsg {
    position: fixed;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 26px;
    color: red;
    display: none;
    font-weight: bold;
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="gameOverMsg">باختی! :(</div>
<button id="restartBtn">دوباره بازی کن</button>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

let score = 0;
let isGameOver = false;
let basket = { 
  width: 120, 
  height: 30, 
  x: window.innerWidth / 2 - 60, 
  y: window.innerHeight - 140
};
let coins = [];
let spawnInterval;

function spawnCoin() {
  coins.push({ 
    x: Math.random() * (canvas.width - 30) + 15, 
    y: -30, 
    size: 30, 
    speed: 3 + Math.random() * 2 
  });
}

function startGame() {
  score = 0;
  isGameOver = false;
  coins = [];
  basket.x = window.innerWidth / 2 - basket.width / 2;
  document.getElementById("restartBtn").style.display = "none";
  document.getElementById("gameOverMsg").style.display = "none";

  if (spawnInterval) clearInterval(spawnInterval);
  spawnCoin();
  spawnInterval = setInterval(spawnCoin, 1000);

  requestAnimationFrame(gameLoop);
}

function gameLoop() {
  if (isGameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // رسم سبد
  ctx.fillStyle = "brown";
  ctx.fillRect(basket.x, basket.y, basket.width, basket.height);

  // رسم کوین‌ها
  ctx.fillStyle = "gold";
  for (let i = 0; i < coins.length; i++) {
    let coin = coins[i];
    ctx.beginPath();
    ctx.arc(coin.x, coin.y, coin.size / 2, 0, Math.PI * 2);
