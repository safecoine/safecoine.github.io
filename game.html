<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Coin Catch Game</title>
<style>
  body {
    margin: 0;
    background: #222;
    overflow: hidden;
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
  }
  #gameCanvas {
    background: linear-gradient(#333, #111);
    display: block;
    margin: auto;
  }
  #score {
    font-size: 24px;
    margin: 10px;
  }
</style>
</head>
<body>
<div id="score">امتیاز: 0</div>
<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let basket = { x: 160, y: 550, width: 80, height: 20 };
let coins = [];
let score = 0;
let gameOver = false;
let speed = 2;

function createCoin() {
  coins.push({
    x: Math.random() * (canvas.width - 30),
    y: -30,
    size: 30
  });
}

function drawBasket() {
  ctx.fillStyle = "gold";
  ctx.fillRect(basket.x, basket.y, basket.width, basket.height);
}

function drawCoin(coin) {
  ctx.beginPath();
  ctx.arc(coin.x + coin.size/2, coin.y + coin.size/2, coin.size/2, 0, Math.PI * 2);
  ctx.fillStyle = "yellow";
  ctx.fill();
  ctx.strokeStyle = "#b8860b";
  ctx.stroke();
}

function update() {
  if (gameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawBasket();

  coins.forEach((coin, i) => {
    coin.y += speed;
    drawCoin(coin);

    // برخورد با سبد
    if (
      coin.y + coin.size > basket.y &&
      coin.x + coin.size > basket.x &&
      coin.x < basket.x + basket.width
    ) {
      score++;
      document.getElementById("score").innerText = "امتیاز: " + score;
      coins.splice(i, 1);

      // پیام انگیزشی
      if (score % 5 === 0) {
        alert("آفرین! داری ترکوندی 😎");
      }

      // افزایش سختی
      if (score % 3 === 0) speed += 0.5;
    }

    // اگر کوین رد شد
    if (coin.y > canvas.height) {
      gameOver = true;
      alert("باختی 😂 امتیازت شد: " + score);
    }
  });

  requestAnimationFrame(update);
}

setInterval(createCoin, 800); // هر 0.8 ثانیه یه کوین
update();

// کنترل با موس
document.addEventListener("mousemove", e => {
  let rect = canvas.getBoundingClientRect();
  basket.x = e.clientX - rect.left - basket.width / 2;
});

// کنترل با لمس
canvas.addEventListener("touchmove", e => {
  let touch = e.touches[0];
  let rect = canvas.getBoundingClientRect();
  basket.x = touch.clientX - rect.left - basket.width / 2;
  e.preventDefault();
}, { passive: false });

</script>
</body>
</html>
